---
title: "Midterm Qs1"
author: "Anous Ahmed"
date: "2025-10-17"
output:
  pdf_document:
  highlight: espresso
---

Link to Repository: https://github.com/aahme102/Midterm-.git

# Part I: Civic Issue â€“ Obesity in the United States

Obesity is a major health concern in the United States. It is reported that obesity contributes to over \$170 billion in annual medical costs. This is a grave strain on the healthcare system that deepens inequalities and increases healthcare costs (CDC, 2024). This includes billions in extra costs to the Medicare and Medicaid programs. According to the World Health Organization (WHO), obesity is defined as having a body mass index (BMI) of 30 kg/m2 or higher for adults (Chusan et al., 2025). The prevalence of this disease is a significant health concern, contributing to major complications like diabetes, heart disease, high blood pressure, sleep apnea, and cancer. It also contributes to poor mental health, reduced quality of life, and greater levels of disability (Mayo, 2023). According to the Centers for Disease Control and Prevention (CDC), the prevalence of obesity among adults aged 20 and older in the U.S. was 41.9% from 2017 to 2020. This equates to over 100 million individuals (CDC, 2024). It is further projected that by 2035, obesity rates will rise even further, reaching 25% among adults and 19% among youth (Chusan et al., 2025).

One of the major causes of obesity in the United States is aggressive marketing of unhealthy food and beverages. It is reported that major Food & Beverage companies spend nearly \$14 billion annually on advertising fast food, sugary drinks, candy, and processed snacks (The State of Obesity, 2023). On the other hand, socioeconomic barriers are another fundamental reason as to why there is an obesity epidemic in the U.S. Individuals in low-income communities are deprived of reliable nutritional information. Hence, they cannot access a healthy nutrition plan. Moreover, areas with limited or no public transportation prevent individuals from accessing grocery stores with fresh produce or local fitness centers. Hence, leading to weight gain, and in excessive cases, obesity.

Children and adolescents with obesity are likely to remain obese into adulthood, perpetuating a cycle of poor health outcomes and social disadvantages. This has a negative impact on the national productivity and workforce capacity. national productivity and workforce capacity. Therefore, addressing this civic problem requires an indoctrination of healthcare measures and technological solutions to cultivate sustainable lifestyles.

# Part II: Web scraping 

```{r}
library(rvest)
library(httr)
library(jsonlite)
library(tidycensus)
library(tidyverse)
```

```{r}
url <- "https://www.scrapethissite.com/pages/simple/"
html <- read_html(url)
```

```{r}
block <- html |> 
  html_elements("div.col-md-4.country")
block  

Country = block |> 
  html_element("h3.country-name") |> 
  html_text2()
head (Country, 10)

Capital <- block |> 
  html_element("span.country-capital") |> 
  html_text2()
head (Capital, 10)

Population <- block %>%
  html_element("span.country-population") %>%
  html_text2()
head (Population, 10)

Area <- block %>%
  html_element("span.country-area") %>%
  html_text2()
head(Area, 10)
```

```{r}
df = tibble(
  Country,
  Capital,
  Population,
  Area
)
```

```{r}
head(df, 10) 
```

# PART III: API Access

**Step 1: Identify Relevant Variables**

https://api.census.gov/data/2023/acs/acs5/groups/B19013.html

https://api.census.gov/data/2023/acs/acs5/groups/B28002.html


Median household income (in the past 12 months): **B19013_001E**
Households with broadband Internet: **B28002_004E** 
Total households with any type of internet access: **B28002_001E**

**Step 2: Retrieve Data**
```{r}
readRenviron("~/.Renviron")
```

```{r}
county_data <- get_acs(
  geography = "county",
  variables  = c(
  median_income = "B19013_001E", 
  broadband_internet = "B28002_004E", 
  internet_access = "B28002_001E"
  ),
  state = "IL",
  year = 2023,
  survey = "acs5"
)
```

**Step 3: Clean and Transform Data** 

```{r}
county_data1a = county_data %>%
  select(NAME, variable, estimate) %>%
  pivot_wider(
    names_from = variable,
    values_from = estimate
  ) 
```

```{r}  
county_data1a = county_data1a %>%  
  rename(
    income = B19013_001,
    broadband = B28002_004,
    total_households = B28002_001
  ) %>%
  separate(NAME, into = c("county", "state"), sep = ", ") %>%
  mutate(broadband_rate = (broadband / total_households) * 100) %>%
  arrange(desc(broadband_rate))
```

**Step 4: Analyze patterns** 

**a) Compute the mean and median broadband rate across all Illinois counties.** 

```{r}  
# mean for the broadband rate
county_data1a %>% 
  summarize(mean(broadband_rate, na.rm = TRUE))
```


```{r}  
# median for the broadband rate
county_data1a %>% 
  summarize(median(broadband_rate, na.rm = TRUE))
```

**b) Identify the top 5 counties with the highest broadband access and the bottom 5 counties with the lowest.**

```{r}
# Counties with highest broadband access
county_data1a %>%
  arrange(desc(broadband_rate)) %>%
  select(county, broadband_rate) %>%
  slice(1:5)
```

```{r}
# Counties with lowest broadband access
county_data1a %>%
  arrange(broadband_rate) %>%
  select(county, broadband_rate) %>%
  slice(1:5)
```

**Step 5: Visualize the results**

```{r}  

```

**Step 6: Reflection**

```{r}  

```
